<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>Content Manager</title>
  
  <!-- 1. CARGAR REACT PRIMERO (VERSIÓN COMPATIBLE) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body>
  <div id="nc-root"></div>

  <!-- 2. LUEGO CARGAR DECAP CMS -->
  <script src="https://unpkg.com/decap-cms@3.7.1/dist/decap-cms.js"></script>
  
 
  
  <script>
    // Polish translations for Decap CMS
    const plTranslations = {
      auth: {
        login: 'Zaloguj się',
        loggingIn: 'Logowanie...',
        loginWithNetlifyIdentity: 'Zaloguj się przez Netlify Identity',
        loginWithBitbucket: 'Zaloguj się przez Bitbucket',
        loginWithGitHub: 'Zaloguj się przez GitHub',
        loginWithGitLab: 'Zaloguj się przez GitLab',
        errors: {
          email: 'Wprowadź swój email.',
          password: 'Wprowadź swoje hasło.',
          identitySettings: 'Nie można uzyskać dostępu do ustawień tożsamości. Podczas korzystania z git-gateway backend upewnij się, że usługa Identity i Git Gateway są włączone w Netlify.'
        }
      },
      app: {
        header: {
          content: 'Treści',
          workflow: 'Przepływ pracy',
          media: 'Media',
          quickAdd: 'Szybkie dodawanie'
        },
        app: {
          errorHeader: 'Błąd podczas ładowania konfiguracji CMS',
          configErrors: 'Błędy konfiguracji',
          checkConfigYml: 'Sprawdź plik config.yml.',
          loadingConfig: 'Ładowanie konfiguracji...',
          waitingBackend: 'Oczekiwanie na backend...'
        },
        notFoundPage: {
          header: 'Nie znaleziono'
        }
      },
      collection: {
        sidebar: {
          collections: 'Kolekcje',
          allCollections: 'Wszystkie kolekcje'
        },
        collectionTop: {
          sortBy: 'Sortuj według',
          viewAs: 'Wyświetl jako',
          newButton: 'Nowy %{collectionLabel}'
        }
      },
      editor: {
        editorControl: {
          field: {
            optional: 'opcjonalne'
          }
        },
        editorControlPane: {
          widget: {
            required: '%{fieldLabel} jest wymagane.'
          }
        }
      },
      mediaLibrary: {
        mediaLibraryCard: {
          draft: 'Szkic'
        },
        mediaLibrary: {
          onDeleteTitle: 'Usunąć wybrane media?'
        }
      },
      ui: {
        default: {
          goBackToSite: 'Wróć do strony'
        },
        toast: {
          entrySaved: 'Wpis zapisany',
          entryPublished: 'Wpis opublikowany'
        }
      }
    };
    
    // Inicialización simplificada
    document.addEventListener('DOMContentLoaded', function() {
      // Registrar traducciones si CMS está disponible
      if (window.CMS) {
        CMS.registerLocale('pl', plTranslations);
        
        // Inicializar Decap CMS
        CMS.init();
      }

      // Inicialización de Netlify Identity
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    });
  </script>
</body>
</html>
